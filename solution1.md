# serverless 平台调研

## FaaS

Serverless的使用场景

异步，并发，易于并行化成独立工作单元的工作负载
低频或有零星请求，但具有较大不可预测扩容变化需求的工作负载
无状态，短期运行，对冷启动延迟不敏感的工作负载
业务需求变化迅速，要求快速开发实现的场景
适合微服务化程度比较高的devops

使用serverless的主要目的

减少闲置资源
快速开发处理数据
与其他服务互联
通过密集处理大量请求来平衡负载。

### 华为 FunctionGraph

优点：
基于华为云的基础能力，可以进行低代码开发，支持多种语言的函数编写，提交为一个函数运行
支持自动扩缩容
适合快速开发

用户编写代码，目前支持Node.js、Python、Java、Go、C#、PHP等语言
上传代码，目前支持在线编辑、上传ZIP或JAR包，从OBS引用ZIP包等
可以通过API和云产品事件源触发函数执行，参考使用SMN触发器、使用DMS触发器、使用APIG触发器、使用OBS触发器、使用DIS触发器、使用定时触发器、使用Kafka触发器。
函数在执行过程中，会根据请求量弹性扩容，支持请求峰值的执行，此过程用户无需配置，由FunctionGraph完成，并发数限制请参考使用限制。
FunctionGraph函数实现了与云日志服务的对接，您无需配置，即可查看函数运行日志信息，请参考查询日志。
FunctionGraph函数实现了与云监控服务的对接，您无需配置，即可查看图形化监控信息，请参考监控函数。
函数执行结束后，根据函数请求执行次数和执行时间计费，收费粒度精确到100ms。

缺点：
处于比较早期的试用阶段，使用案例比较少
辅助性的功能处于缺失状态，例如调试定位bug等比较困难

### OpenFaaS

优点：

预设了函数模板，可以直接支持函数低代码
标准化统一的faas流程定义

缺点：

OpenFaaS 函数在容器中运行，并且每个容器必须遵守简单的约定 ：它作为监听在预设端口（默认为 8080）上的 HTTP 服务器，临时存储并且是无状态的。

某些编程语言的冷启动时间很长。
需要对接实际的厂商平台或者k8s，容器启动时间取决于提供者。
该功能的生命周期有限，这意味着并非所有系统都可以根据 Serverless 工作。（使用 OpenFaaS 时，计算容器无法在内存中长时间存储可执行的应用程序代码。平台会自动创建和销毁它们，因此无状态状态是不可能的。）

### Knative

优点：

兼容性比较好，基于 Kubernetes 和 Istio，不依赖厂商绑定的组件

可以支持根据请求量伸缩0-n的自动扩缩容

对于常用应用用例的更高级别抽象
安全、无状态、可扩展应用的秒级启动

缺点：

偏向于BaaS，需要以镜像为调度单元，不能完全做到低代码

与 OpenFaas 不同，Knative 不是一个成熟的无服务器平台，但它更适合作为创建、部署和管理无服务器工作负载的平台。但是，从配置和维护的角度来看，OpenFaas更简单。

## ServiceMesh

可以将服务寻址、访问控制、流量限流、熔断降级相关独立，将业务与治理解耦，微服务治理能力下沉至运维层，降低开发难度，在架构上更容易实现层次化、规范化、体系化。

### Istio

可以智能控制服务之间的调用流量，能够实现灰度升级、AB 测试和红黑部署等功能

核心的功能是统一的api管理流量控制

基于流控能力，可以做到超时、重试、高可用、多路由规则、AB测试、灰度发布、按照百分比分配流量等。





## CCE HPA

GA？



## 网格CCE







